<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 EDA for text contents | Explore Wikipedia locations</title>
  <meta name="description" content="Chapter 3 EDA for text contents | Explore Wikipedia locations" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 EDA for text contents | Explore Wikipedia locations" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 EDA for text contents | Explore Wikipedia locations" />
  
  
  

<meta name="author" content="Ronnie Liu Nuozhi" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="prepare-data.html"/>
<link rel="next" href="topic-modeling.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Your project name</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Exploring Topics of Place and Housing Price</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#research-question-and-hypothesis"><i class="fa fa-check"></i><b>1.2</b> Research question and hypothesis</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#hypothesis"><i class="fa fa-check"></i><b>1.2.1</b> Hypothesis</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#research-question"><i class="fa fa-check"></i><b>1.2.2</b> Research question</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-sources"><i class="fa fa-check"></i><b>1.3</b> Data sources</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#source-1-hdb-housing"><i class="fa fa-check"></i><b>1.3.1</b> Source 1: HDB housing</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#source-2-wikipedia"><i class="fa fa-check"></i><b>1.3.2</b> Source 2: Wikipedia</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#methodology"><i class="fa fa-check"></i><b>1.4</b> Methodology</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#extensionslimitations"><i class="fa fa-check"></i><b>1.5</b> Extensions/Limitations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prepare-data.html"><a href="prepare-data.html"><i class="fa fa-check"></i><b>2</b> Prepare data</a><ul>
<li class="chapter" data-level="2.1" data-path="prepare-data.html"><a href="prepare-data.html#wikipedia-data"><i class="fa fa-check"></i><b>2.1</b> Wikipedia data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="prepare-data.html"><a href="prepare-data.html#change-singapore-to-hexagons"><i class="fa fa-check"></i><b>2.1.1</b> change singapore to hexagons</a></li>
<li class="chapter" data-level="2.1.2" data-path="prepare-data.html"><a href="prepare-data.html#remove-locations-outside-singapore"><i class="fa fa-check"></i><b>2.1.2</b> Remove locations outside Singapore</a></li>
<li class="chapter" data-level="2.1.3" data-path="prepare-data.html"><a href="prepare-data.html#binding-points-with-hex_id"><i class="fa fa-check"></i><b>2.1.3</b> binding points with hex_id</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prepare-data.html"><a href="prepare-data.html#housing"><i class="fa fa-check"></i><b>2.2</b> Housing</a><ul>
<li class="chapter" data-level="2.2.1" data-path="prepare-data.html"><a href="prepare-data.html#import-housing-location"><i class="fa fa-check"></i><b>2.2.1</b> import housing location</a></li>
<li class="chapter" data-level="2.2.2" data-path="prepare-data.html"><a href="prepare-data.html#binding-housing-to-hexagon"><i class="fa fa-check"></i><b>2.2.2</b> binding housing to hexagon</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prepare-data.html"><a href="prepare-data.html#wiki-in-conjunction-with-house"><i class="fa fa-check"></i><b>2.3</b> Wiki in conjunction with House</a></li>
<li class="chapter" data-level="2.4" data-path="prepare-data.html"><a href="prepare-data.html#export-data"><i class="fa fa-check"></i><b>2.4</b> Export data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html"><i class="fa fa-check"></i><b>3</b> EDA for text contents</a><ul>
<li class="chapter" data-level="3.1" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html#tidy-text"><i class="fa fa-check"></i><b>3.1</b> Tidy text</a><ul>
<li class="chapter" data-level="3.1.1" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html#a-look-at-titles"><i class="fa fa-check"></i><b>3.1.1</b> A look at titles</a></li>
<li class="chapter" data-level="3.1.2" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html#a-look-at-an-articles"><i class="fa fa-check"></i><b>3.1.2</b> A look at an articles</a></li>
<li class="chapter" data-level="3.1.3" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html#tokenizations-lemmatization-pos-tagging"><i class="fa fa-check"></i><b>3.1.3</b> Tokenizations &amp; Lemmatization &amp; POS tagging</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html#n-gram"><i class="fa fa-check"></i><b>3.2</b> N-gram</a><ul>
<li class="chapter" data-level="3.2.1" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html#bigram"><i class="fa fa-check"></i><b>3.2.1</b> Bigram</a></li>
<li class="chapter" data-level="3.2.2" data-path="eda-for-text-contents.html"><a href="eda-for-text-contents.html#trigram"><i class="fa fa-check"></i><b>3.2.2</b> Trigram</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="topic-modeling.html"><a href="topic-modeling.html"><i class="fa fa-check"></i><b>4</b> Topic modeling</a><ul>
<li class="chapter" data-level="4.1" data-path="topic-modeling.html"><a href="topic-modeling.html#corpus"><i class="fa fa-check"></i><b>4.1</b> Corpus</a></li>
<li class="chapter" data-level="4.2" data-path="topic-modeling.html"><a href="topic-modeling.html#tf-idf"><i class="fa fa-check"></i><b>4.2</b> TF-IDF</a></li>
<li class="chapter" data-level="4.3" data-path="topic-modeling.html"><a href="topic-modeling.html#lda"><i class="fa fa-check"></i><b>4.3</b> LDA</a><ul>
<li class="chapter" data-level="4.3.1" data-path="topic-modeling.html"><a href="topic-modeling.html#composition-of-topics-theta"><i class="fa fa-check"></i><b>4.3.1</b> Composition of topics (theta)</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="topic-modeling.html"><a href="topic-modeling.html#binding-topics-with-spatial-information"><i class="fa fa-check"></i><b>4.4</b> Binding topics with spatial information</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pca.html"><a href="pca.html"><i class="fa fa-check"></i><b>5</b> PCA</a><ul>
<li class="chapter" data-level="5.1" data-path="pca.html"><a href="pca.html#binding-topic-with-housing"><i class="fa fa-check"></i><b>5.1</b> Binding topic with housing</a></li>
<li class="chapter" data-level="5.2" data-path="pca.html"><a href="pca.html#sample-statistic"><i class="fa fa-check"></i><b>5.2</b> Sample statistic</a><ul>
<li class="chapter" data-level="5.2.1" data-path="pca.html"><a href="pca.html#compare-mean-price-between-topics"><i class="fa fa-check"></i><b>5.2.1</b> Compare mean price between topics</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="pca.html"><a href="pca.html#pca-1"><i class="fa fa-check"></i><b>5.3</b> PCA</a></li>
<li class="chapter" data-level="5.4" data-path="pca.html"><a href="pca.html#regression"><i class="fa fa-check"></i><b>5.4</b> Regression</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="conclusion-and-limitations.html"><a href="conclusion-and-limitations.html"><i class="fa fa-check"></i><b>6</b> Conclusion and limitations</a><ul>
<li class="chapter" data-level="6.1" data-path="conclusion-and-limitations.html"><a href="conclusion-and-limitations.html#conclusion"><i class="fa fa-check"></i><b>6.1</b> Conclusion</a></li>
<li class="chapter" data-level="6.2" data-path="conclusion-and-limitations.html"><a href="conclusion-and-limitations.html#limitations"><i class="fa fa-check"></i><b>6.2</b> Limitations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Explore Wikipedia locations</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="eda-for-text-contents" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> EDA for text contents</h1>
<p>Initially, the project will scoping into wikipedia articles at first, by only looking at the texts for now.</p>
<div id="tidy-text" class="section level2">
<h2><span class="header-section-number">3.1</span> Tidy text</h2>
<div id="a-look-at-titles" class="section level3">
<h3><span class="header-section-number">3.1.1</span> A look at titles</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">titles &lt;-<span class="st"> </span>wiki_hex <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_set_geometry</span>(<span class="ot">NULL</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>text)</a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">my_stop_words &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">word =</span> <span class="kw">c</span>(<span class="st">&quot;station&quot;</span>, <span class="st">&quot;school&quot;</span>, <span class="st">&quot;mrt&quot;</span>, <span class="st">&quot;singapore&quot;</span>))</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"></a>
<a class="sourceLine" id="cb25-3" data-line-number="3">titles <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="st">  </span><span class="kw">unnest_tokens</span>(word, title) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb25-5" data-line-number="5"><span class="st">  </span><span class="kw">anti_join</span>(stop_words) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-6" data-line-number="6"><span class="st">  </span><span class="co"># anti_join(my_stop_words) %&gt;%</span></a>
<a class="sourceLine" id="cb25-7" data-line-number="7"><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb25-8" data-line-number="8"><span class="st">  </span><span class="kw">top_n</span>(<span class="dt">n=</span><span class="dv">30</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb25-9" data-line-number="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">fct_reorder</span>(word, n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-10" data-line-number="10"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, n)) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb25-12" data-line-number="12"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>From the titles, it can tell most of the locations are about stations and schools. There are 645 titles, while arount 100 titles are about stations and mrt, and another about 80 titles are about schools.</p>
</div>
<div id="a-look-at-an-articles" class="section level3">
<h3><span class="header-section-number">3.1.2</span> A look at an articles</h3>
<p>Here we can take a look a slot of articles. Here just randomly take the passage about Tuas Biomedical Park.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">wiki_text &lt;-<span class="st"> </span>wiki_hex <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_set_geometry</span>(<span class="ot">NULL</span>) <span class="co"># only text</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw">print</span>(wiki_text[<span class="dv">2</span>,]<span class="op">$</span>text)</a></code></pre></div>
<pre><code>## [1] &quot;Tuas Biomedical Park (abbreviation: TBP) is a biomedical manufacturing cluster developed by JTC Corporation at the western end of Singapore. The 183-hectare Tuas Biomedical Park I and 188-hectare Tuas Biomedical Park II are located at Tuas View – 20 minutes away from Jurong Port and five minutes from the Tuas Checkpoint to Malaysia. TBP comes with all essential infrastructure, such as roads, power lines, telecommunication lines, sewer pipes and water and gas supplies. Third parties are providing utilities such as steam, natural gas, chilled water and waste treatment services. To improve the appearance of the industrial estate, JTC has spent $6 million on lush landscaping. With the estate&#39;s \&quot;plug-and-play\&quot; design, pharmaceutical, biologics, medical device and other biomedical companies can set up manufacturing operations with minimal lead time. They can either move into fully serviced facilities or custom-build their own manufacturing plants. Currently, there are many well-known companies operating in TBP.  They include global biomedical players like Merck, Novartis, Pfizer, Wyeth, Genentech and GlaxoSmithKline.&quot;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">wiki_text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">word_number =</span> <span class="kw">lengths</span>(<span class="kw">str_split</span>(text, <span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(word_number) <span class="op">%&gt;%</span><span class="st"> </span>skimr<span class="op">::</span><span class="kw">skim</span>()</a></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-18">Table 3.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">1140</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">title</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">90</td>
<td align="right">0</td>
<td align="right">1140</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">text</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">79</td>
<td align="right">80106</td>
<td align="right">0</td>
<td align="right">1140</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">hex_id</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">381</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">pageid</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">16851182.49</td>
<td align="right">17973887.17</td>
<td align="right">27318</td>
<td align="right">2644529</td>
<td align="right">8263434</td>
<td align="right">28053295.00</td>
<td align="right">63144025</td>
<td align="left">▇▂▂▁▁</td>
</tr>
<tr class="even">
<td align="left">word_number</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">659.65</td>
<td align="right">927.28</td>
<td align="right">13</td>
<td align="right">204</td>
<td align="right">383</td>
<td align="right">753.75</td>
<td align="right">12469</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">wiki_text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">word_number =</span> <span class="kw">lengths</span>(<span class="kw">str_split</span>(text, <span class="dt">pattern =</span> <span class="st">&quot; &quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x =</span> word_number, <span class="dt">y =</span> ..density..))</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>With skimming at the dataset, each articles contains 604 words in averrage. 50% of articles are over 360 words.</p>
</div>
<div id="tokenizations-lemmatization-pos-tagging" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Tokenizations &amp; Lemmatization &amp; POS tagging</h3>
<p>A token is a meaningful unit of text, such as a word, that we are interested in using for analysis, and tokenization is the process of splitting text into tokens. On a simply way, tokenization means break a sentence into words and filter out the unimportant information which usually refers to words such as <code>the</code>, <code>a</code>, <code>that</code>, <code>so</code> as well as punctuation.</p>
<p>However, tokenization may not promise a clean dataset, since some word in different format and tense will be counted respectively. For example, <code>located</code> and <code>locate</code>, <code>schools</code> and <code>school</code> and so on. Hence, it will require to apply lemmatization to extract the stem of the words in order to reduce the interference.</p>
<p>Also, it will be good if it can tell us whether is a noun or verb, here comes the pos tagging.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">tokens &lt;-<span class="st"> </span>wiki_text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(hex_id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="st">  </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="st">  </span><span class="kw">anti_join</span>(stop_words) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">lemmatize_words</span>(word)) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># lemmatize </span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5"><span class="st">  </span><span class="kw">inner_join</span>(parts_of_speech) <span class="co"># pos tag</span></a>
<a class="sourceLine" id="cb31-6" data-line-number="6"><span class="kw">glimpse</span>(tokens)</a></code></pre></div>
<pre><code>## Rows: 641,707
## Columns: 5
## $ pageid &lt;dbl&gt; 3956978, 3956978, 3956978, 3956978, 3956978, 3956978, 3956978,…
## $ title  &lt;chr&gt; &quot;Malaysia–Singapore border&quot;, &quot;Malaysia–Singapore border&quot;, &quot;Mal…
## $ hex_id &lt;chr&gt; &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5&quot;, &quot;5…
## $ word   &lt;chr&gt; &quot;malaysia&quot;, &quot;singapore&quot;, &quot;border&quot;, &quot;border&quot;, &quot;international&quot;, …
## $ pos    &lt;chr&gt; &quot;Noun&quot;, &quot;Noun&quot;, &quot;Noun&quot;, &quot;Verb (transitive)&quot;, &quot;Adjective&quot;, &quot;Nou…</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">skimr<span class="op">::</span><span class="kw">skim</span>(tokens)</a></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-21">Table 3.2: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">tokens</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">641707</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">title</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">5</td>
<td align="right">90</td>
<td align="right">0</td>
<td align="right">1140</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">hex_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">381</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">word</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">20</td>
<td align="right">0</td>
<td align="right">14060</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pos</td>
<td align="right">9977</td>
<td align="right">0.98</td>
<td align="right">4</td>
<td align="right">21</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">pageid</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">13125193</td>
<td align="right">16462102</td>
<td align="right">27318</td>
<td align="right">1920900</td>
<td align="right">4398470</td>
<td align="right">17072954</td>
<td align="right">63144025</td>
<td align="left">▇▂▁▁▁</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="co">### Token</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="co"># token (freq &gt; 1) count in total</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3">tokens <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)<span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">cat</span>(<span class="st">&quot;There are &quot;</span>, ., <span class="st">&quot;tokens (freq &gt; 1).&quot;</span>)</a></code></pre></div>
<pre><code>## There are  10476 tokens (freq &gt; 1).</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">tokens <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(n, ..density..)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;tokens frequency (&gt; 1)&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co">### Pos tag</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="co"># How the pos tag distributed?</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3">tokens <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw">fct_infreq</span>(pos))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb37-7" data-line-number="7"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;pos tag&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;POS tag frequency&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="co"># What is the most occurrin words?</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2">tokens <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="st">  </span><span class="kw">top_n</span>(<span class="dt">n=</span><span class="dv">30</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">fct_reorder</span>(word, n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb38-6" data-line-number="6"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, n)) <span class="op">+</span></a>
<a class="sourceLine" id="cb38-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb38-8" data-line-number="8"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-9" data-line-number="9"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;word&quot;</span>, </a>
<a class="sourceLine" id="cb38-10" data-line-number="10">       <span class="dt">title =</span> <span class="st">&quot;Top 30 frequent words&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-22-3.png" width="672" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="co"># What is the most occurrin adhectuve or adverb?</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">tokens <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(pos <span class="op">==</span><span class="st"> &quot;Adjective&quot;</span> <span class="op">|</span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="st">         </span>pos <span class="op">==</span><span class="st"> &quot;Adverb&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5"><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-6" data-line-number="6"><span class="st">  </span><span class="kw">top_n</span>(<span class="dt">n=</span><span class="dv">30</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">fct_reorder</span>(word, n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-8" data-line-number="8"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, n)) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb39-10" data-line-number="10"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-11" data-line-number="11"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Adj. / Adv.&quot;</span>,</a>
<a class="sourceLine" id="cb39-12" data-line-number="12">       <span class="dt">title =</span> <span class="st">&quot;Most frequent adjective/ adverb&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-22-4.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="co"># token %&gt;% count(word, sort = T) %&gt;% </span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="co">#   filter(n &gt; 1) %&gt;% </span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="co">#   wordcloud2::wordcloud2(color = &quot;random-light&quot;)</span></a></code></pre></div>
<p>With tokenizing and lemmatizing all the articles, there are 641707 words with excluding stopwords, and 14060 unique words remaining. There are 3584 words only occur once in the tokens (remaining 10476).</p>
<p>The articles consist of a large portion of Noun. The interjection just takes a very small part. From the top 30 words, some key words shows significant ranks such as <code>school</code>, <code>station</code>, <code>road</code>, <code>park</code>, <code>centre</code>. Also, the most frequent adjective/adverb for descripiton would be directions (<code>east</code>, <code>north</code>, <code>south</code>), nationality and ethnicity (<code>national</code>, <code>japanese</code>, <code>chinese</code>, <code>british</code>) and so on.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">key_word_filter =<span class="st"> </span><span class="cf">function</span>(kw) {</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">  d &lt;-<span class="st"> </span>hex <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(tokens <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(word <span class="op">==</span><span class="st"> </span>kw) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(hex_id) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb41-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb41-4" data-line-number="4">  <span class="kw">tm_shape</span>(d) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="dt">col =</span> <span class="st">&quot;n&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_layout</span>(<span class="dt">title =</span> kw)</a>
<a class="sourceLine" id="cb41-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb41-6" data-line-number="6"></a>
<a class="sourceLine" id="cb41-7" data-line-number="7"><span class="kw">key_word_filter</span>(<span class="st">&quot;singapore&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;school&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-2.png" width="672" /></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;station&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-3.png" width="672" /></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;road&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-4.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;park&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-5.png" width="672" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;centre&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-6.png" width="672" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;design&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-7.png" width="672" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;national&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-8.png" width="672" /></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;chinese&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-9.png" width="672" /></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="kw">key_word_filter</span>(<span class="st">&quot;public&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-23-10.png" width="672" /></p>
<p>From the plots above, the spatial distribution is more dispersed, while other tokens are more condensed in central areas.</p>
</div>
</div>
<div id="n-gram" class="section level2">
<h2><span class="header-section-number">3.2</span> N-gram</h2>
<p>Instead of just looking at one word, there are more common that some phrases occur in pairs. Splitting into one word may break the context of the semantics. In order to catch that, N-gram will help to certain sequence of words arrangement.</p>
<div id="bigram" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Bigram</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">bigrams &lt;-<span class="st"> </span>wiki_text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(hex_id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="st">  </span><span class="kw">unnest_tokens</span>(bigram, text, <span class="dt">token=</span><span class="st">&quot;ngrams&quot;</span>, <span class="dt">n =</span> <span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb51-3" data-line-number="3"></a>
<a class="sourceLine" id="cb51-4" data-line-number="4">bigrams <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(bigram, <span class="kw">c</span>(<span class="st">&quot;word1&quot;</span>, <span class="st">&quot;word2&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb51-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word1 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb51-6" data-line-number="6"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word2 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb51-7" data-line-number="7"><span class="st">  </span><span class="kw">unite</span>(bigram, word1, word2, <span class="dt">sep=</span><span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb51-8" data-line-number="8"><span class="st">  </span><span class="kw">count</span>(bigram, <span class="dt">sort =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb51-9" data-line-number="9"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">30</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb51-10" data-line-number="10"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">fct_reorder</span>(bigram, n), <span class="dt">y =</span> n)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb51-11" data-line-number="11"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb51-12" data-line-number="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Bigram Top 30&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Bigram&quot;</span>)</a></code></pre></div>
<pre><code>## Selecting by n</code></pre>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>We can see the relation in pair via <code>bigram</code>.</p>
<p>It captures the phrase intead just breaking into two different tokens. Here gives the phrase like “pink dot”, “junior college”, “speakers corner”, “mrt station” and so on. While some terms like “Ang Mo Kio”, “Lee Kuan Yew” consisting of three words has been mistaken, since the bigram just capture two words and giving “chu kang”, “kuan yew” and “lee kuan”.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">trigrams &lt;-<span class="st"> </span>wiki_text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(hex_id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="st">  </span><span class="kw">unnest_tokens</span>(trigram, text, <span class="dt">token=</span><span class="st">&quot;ngrams&quot;</span>, <span class="dt">n =</span> <span class="dv">3</span>, , <span class="dt">n_min=</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb53-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb53-4" data-line-number="4">trigrams_filter &lt;-<span class="st"> </span>trigrams <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb53-5" data-line-number="5"><span class="st">  </span><span class="kw">separate</span>(trigram, <span class="kw">c</span>(<span class="st">&quot;word1&quot;</span>, <span class="st">&quot;word2&quot;</span>, <span class="st">&quot;word3&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb53-6" data-line-number="6"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word1 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word,</a>
<a class="sourceLine" id="cb53-7" data-line-number="7">         <span class="op">!</span>word2 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word,</a>
<a class="sourceLine" id="cb53-8" data-line-number="8">         <span class="op">!</span>word3 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb53-9" data-line-number="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word1 =</span> <span class="kw">lemmatize_words</span>(word1)) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># lemmatize </span></a>
<a class="sourceLine" id="cb53-10" data-line-number="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word2 =</span> <span class="kw">lemmatize_words</span>(word2)) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># lemmatize </span></a>
<a class="sourceLine" id="cb53-11" data-line-number="11"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word3 =</span> <span class="kw">lemmatize_words</span>(word3)) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># lemmatize </span></a>
<a class="sourceLine" id="cb53-12" data-line-number="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word2 =</span> <span class="kw">replace_na</span>(word2, <span class="st">&quot;&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb53-13" data-line-number="13"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word3 =</span> <span class="kw">replace_na</span>(word3, <span class="st">&quot;&quot;</span>))</a></code></pre></div>
<pre><code>## Warning: Expected 3 pieces. Missing pieces filled with `NA` in 1520344 rows [1,
## 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 28, 29, ...].</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">trigrams_filter <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(word2 <span class="op">!=</span><span class="st"> &quot;&quot;</span>, word3 <span class="op">!=</span><span class="st"> &quot;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(word1, word2, word3, <span class="dt">sort=</span>T)</a></code></pre></div>
<pre><code>## # A tibble: 73,058 x 4
##    word1     word2     word3       n
##    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt;
##  1 singapore cambridge gce       239
##  2 mass      rapid     transit   154
##  3 ang       mo        kio       129
##  4 rapid     transit   mrt       126
##  5 world     war       ii        117
##  6 east      west      line      114
##  7 gce       ordinary  level     110
##  8 choa      chu       kang      108
##  9 lee       kuan      yew       107
## 10 cambridge gce       normal    106
## # … with 73,048 more rows</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">trigrams_united &lt;-<span class="st"> </span>trigrams_filter <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="st">  </span><span class="kw">unite</span>(gram, word1, word2, word3, <span class="dt">sep=</span><span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb57-4" data-line-number="4">    <span class="dt">gram =</span> <span class="kw">str_trim</span>(gram)</a>
<a class="sourceLine" id="cb57-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb57-6" data-line-number="6">trigrams_united <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(gram, <span class="dt">sort=</span>T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">len =</span> <span class="kw">lengths</span>(<span class="kw">str_split</span>(gram, <span class="st">&quot; &quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-8" data-line-number="8"><span class="st">  </span><span class="kw">filter</span>(len <span class="op">==</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-9" data-line-number="9"><span class="st">    </span><span class="kw">top_n</span>(<span class="dv">30</span>, n) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-10" data-line-number="10"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">fct_reorder</span>(gram, n), <span class="dt">y =</span> n)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb57-11" data-line-number="11"><span class="st">    </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb57-12" data-line-number="12"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Trigram Top 30&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Trigram&quot;</span>)</a></code></pre></div>
<p><img src="explore-wikipedia-location_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
<div id="trigram" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Trigram</h3>
<p>It makes more sense to have trigram which gives us some term “ang mo kio”, “central business district”, “choa chu kang” and so on.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="co"># trigrams_united %&gt;% saveRDS(here::here(&quot;project-data/trigram.rds&quot;))</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="co"># tokens %&gt;% saveRDS(here::here(&quot;project-data/token.rds&quot;))</span></a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="prepare-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="topic-modeling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
